# Magma/magma_config.ini
# This file contains Magma-specific settings for the magma_market_fee.py script.

[magma_autoprice]
# Enable/disable the magma auto-pricing script
enabled = true
# Fraction of LND on-chain confirmed balance to make available for Magma channel sales (0.0 to 1.0)
# This is read from the main config.ini's [magma_autoprice] section
lnd_balance_fraction_for_sale = 0.25
# Comma-separated list of your offer template names (correspond to [magma_offer_TEMPLATENAME] sections below)
our_offer_ids = 5m_30d_standard, 10m_60d_premium
# Percentage of top sellers (by seller_score) to consider for pricing. 
# E.g., 10.0 means consider sellers in the top 10th percentile by score.
seller_score_percentile_target = 10.0
# Target percentile for competitiveness (e.g., 10 means aiming to be better priced than 90% of market, but not necessarily top)
pricing_strategy_percentile = 10
# How many positions "less competitive" than the percentile target.
# E.g., if percentile is 10th and offset is 1, you aim to be priced like the 11th offer.
# This helps avoid being the absolute cheapest if percentile lands you there.
pricing_strategy_position_offset = 1

# Minimum seller_score for any market offer to be considered in analysis. 
# Offers below this score will be ignored. Set to 0 to disable direct score filtering.
min_seller_score_filter = 75.0 

# Threshold for market offer size similarity (0.0 to 1.0). 
# E.g., 0.5 means market offer size must be within +/- 50% of our template size.
size_similarity_threshold = 0.50

# Threshold for market offer duration similarity (0.0 to 1.0).
# E.g., 0.5 means market offer duration must be within +/- 50% of our template duration.
duration_similarity_threshold = 0.50
# Only send telegram notification if changes were made (or attempted)
telegram_notify_on_change_only = true
# Global minimum PPM fee rate that your offers will never go below, regardless of market analysis or template minimums.
global_min_ppm_fee = 2500


# --- Define your Offer Templates ---
# Replace TEMPLATENAME with a unique identifier used in our_offer_ids above.

[magma_offer_5m_30d_standard]
channel_size_sats = 5000000
duration_days = 30 # Duration in days, will be converted to blocks for API
min_fixed_fee_sats = 1000
max_fixed_fee_sats = 25000
min_ppm_fee = 100 # Template specific min PPM, global_min_ppm_fee will also apply
max_ppm_fee = 5000
target_apr_min = 5.0
target_apr_max = 12.0
# Share of the `lnd_balance_fraction_for_sale` dedicated to this offer type (0.0 to 1.0)
# This share determines the 'total_size' (total capital) for this offer on Amboss.
capital_allocation_share = 0.4

[magma_offer_10m_60d_premium]
channel_size_sats = 10000000
duration_days = 60
min_fixed_fee_sats = 2000
max_fixed_fee_sats = 60000
min_ppm_fee = 200
max_ppm_fee = 6000
target_apr_min = 7.0
target_apr_max = 18.0
capital_allocation_share = 0.6

# ... add more [magma_offer_TEMPLATENAME] sections as needed ...